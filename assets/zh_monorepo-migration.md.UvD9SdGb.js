import{_ as s,c as i,o as e,ag as n}from"./chunks/framework.CA53vVaN.js";typeof window<"u"&&window.location.replace("/zh/guide/monorepo-migration");const k=JSON.parse('{"title":"Monorepo 迁移（重定向）","description":"","frontmatter":{},"headers":[],"relativePath":"zh/monorepo-migration.md","filePath":"zh/monorepo-migration.md"}'),l={name:"zh/monorepo-migration.md"};function t(p,a,o,r,h,d){return e(),i("div",null,[...a[0]||(a[0]=[n(`<h1 id="monorepo-迁移-重定向" tabindex="-1">Monorepo 迁移（重定向） <a class="header-anchor" href="#monorepo-迁移-重定向" aria-label="Permalink to &quot;Monorepo 迁移（重定向）&quot;">​</a></h1><p>该页面已迁移到中文指南目录：</p><ul><li>新页面：<code>/zh/guide/monorepo-migration</code></li></ul><p>如果你的链接仍指向 <code>/zh/monorepo-migration</code>，页面将自动跳转。</p><noscript> 页面已迁移：请访问 <a href="/zh/guide/monorepo-migration">中文指南 – Monorepo 迁移</a></noscript> # Monorepo 迁移指南 <h2 id="概览" tabindex="-1">概览 <a class="header-anchor" href="#概览" aria-label="Permalink to &quot;概览&quot;">​</a></h2><p>为了解耦解析器与渲染器，项目将解析器抽离为独立包 <code>stream-markdown-parser</code>，以便跨框架复用和更灵活的打包策略。</p><h2 id="包结构" tabindex="-1">包结构 <a class="header-anchor" href="#包结构" aria-label="Permalink to &quot;包结构&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>vue-markdown-render/</span></span>
<span class="line"><span>├── packages/</span></span>
<span class="line"><span>│   └── markdown-parser/          # stream-markdown-parser</span></span>
<span class="line"><span>│       ├── src/</span></span>
<span class="line"><span>│       │   ├── index.ts          # 入口</span></span>
<span class="line"><span>│       │   ├── config.ts         # KaTeX 配置等</span></span>
<span class="line"><span>│       │   ├── types.ts</span></span>
<span class="line"><span>│       │   ├── parser/</span></span>
<span class="line"><span>│       │   └── plugins/</span></span>
<span class="line"><span>├── src/                          # 主 Vue 包</span></span>
<span class="line"><span>└── playground/</span></span></code></pre></div><h2 id="变更概览" tabindex="-1">变更概览 <a class="header-anchor" href="#变更概览" aria-label="Permalink to &quot;变更概览&quot;">​</a></h2><h3 id="_1-新增包-stream-markdown-parser" tabindex="-1">1. 新增包：<code>stream-markdown-parser</code> <a class="header-anchor" href="#_1-新增包-stream-markdown-parser" aria-label="Permalink to &quot;1. 新增包：\`stream-markdown-parser\`&quot;">​</a></h3><ul><li>纯 JS/TS，无 Vue 依赖</li><li>框架无关，可用于任意 JavaScript 项目</li><li>单个入口导出常用函数：<code>getMarkdown</code>、<code>parseMarkdownToStructure</code> 等</li></ul><h3 id="_2-对主包的影响" tabindex="-1">2. 对主包的影响 <a class="header-anchor" href="#_2-对主包的影响" aria-label="Permalink to &quot;2. 对主包的影响&quot;">​</a></h3><p><code>vue-renderer-markdown</code> 仍作为主要交付包，但现在依赖 <code>stream-markdown-parser</code>：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;stream-markdown-parser&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;workspace:*&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_3-导入变更" tabindex="-1">3. 导入变更 <a class="header-anchor" href="#_3-导入变更" aria-label="Permalink to &quot;3. 导入变更&quot;">​</a></h3><p>对内部开发者：</p><ul><li>旧：</li></ul><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { getMarkdown } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./utils/markdown&#39;</span></span></code></pre></div><ul><li>新：</li></ul><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { getMarkdown } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stream-markdown-parser&#39;</span></span></code></pre></div><p>对外部用户：API 保持一致——更改主要是内部实现与包结构。</p><h2 id="构建与测试" tabindex="-1">构建与测试 <a class="header-anchor" href="#构建与测试" aria-label="Permalink to &quot;构建与测试&quot;">​</a></h2><ul><li>构建解析器包：</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> packages/markdown-parser</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><ul><li>构建主包：</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../..</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><ul><li>运行测试：</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span></code></pre></div><h2 id="好处" tabindex="-1">好处 <a class="header-anchor" href="#好处" aria-label="Permalink to &quot;好处&quot;">​</a></h2><ul><li>更好的可复用性与更小的 bundle</li><li>清晰的边界与独立的版本策略</li><li>更便于单元测试与 CI 的维护</li></ul><h2 id="迁移建议" tabindex="-1">迁移建议 <a class="header-anchor" href="#迁移建议" aria-label="Permalink to &quot;迁移建议&quot;">​</a></h2><ul><li>在代码中把 <code>import</code> 指向新的 <code>stream-markdown-parser</code>。</li><li>为 parser 提供单独的测试文件与基线，以便快速发现破坏性更改。</li><li>将 parser 的发行流程独立于主包。</li></ul>`,34)])])}const u=s(l,[["render",t]]);export{k as __pageData,u as default};
