import{_ as a,c as o,o as s,ag as i}from"./chunks/framework.CA53vVaN.js";const k=JSON.parse('{"title":"解析器 — API 详解","description":"","frontmatter":{},"headers":[],"relativePath":"zh/guide/parser-api.md","filePath":"zh/guide/parser-api.md"}'),t={name:"zh/guide/parser-api.md"};function n(d,e,r,l,p,c){return s(),o("div",null,[...e[0]||(e[0]=[i('<h1 id="解析器-—-api-详解" tabindex="-1">解析器 — API 详解 <a class="header-anchor" href="#解析器-—-api-详解" aria-label="Permalink to &quot;解析器 — API 详解&quot;">​</a></h1><p>此页从 <code>packages/markdown-parser</code> 提取常用函数、类型与便捷工具，便于构建更高级或自定义的解析流程。</p><h2 id="主要函数" tabindex="-1">主要函数 <a class="header-anchor" href="#主要函数" aria-label="Permalink to &quot;主要函数&quot;">​</a></h2><h3 id="getmarkdown-msgid-options" tabindex="-1"><code>getMarkdown(msgId?, options?)</code> <a class="header-anchor" href="#getmarkdown-msgid-options" aria-label="Permalink to &quot;`getMarkdown(msgId?, options?)`&quot;">​</a></h3><p>创建配置好的 <code>markdown-it-ts</code> 实例。</p><p>参数：</p><ul><li><code>msgId</code> (string，可选)：实例标识</li><li><code>options</code> (GetMarkdownOptions，可选)：配置选项</li></ul><p>选项示例：</p><ul><li><code>plugin</code>：插件数组</li><li><code>apply</code>：用于变更 <code>MarkdownIt</code> 实例的函数数组</li><li><code>i18n</code>：翻译映射或函数</li></ul><h3 id="parsemarkdowntostructure-content-md-options" tabindex="-1"><code>parseMarkdownToStructure(content, md?, options?)</code> <a class="header-anchor" href="#parsemarkdowntostructure-content-md-options" aria-label="Permalink to &quot;`parseMarkdownToStructure(content, md?, options?)`&quot;">​</a></h3><p>将 Markdown 字符串解析为供渲染器使用的节点树（AST）。</p><p>返回：<code>ParsedNode[]</code></p><h3 id="其他有用函数" tabindex="-1">其他有用函数 <a class="header-anchor" href="#其他有用函数" aria-label="Permalink to &quot;其他有用函数&quot;">​</a></h3><ul><li><code>processTokens(tokens)</code> — 将原始 token 处理为可用于构建节点列表的结构</li><li><code>parseInlineTokens(tokens, md)</code> — 解析 inline tokens</li></ul><h2 id="配置与工具" tabindex="-1">配置与工具 <a class="header-anchor" href="#配置与工具" aria-label="Permalink to &quot;配置与工具&quot;">​</a></h2><h3 id="setdefaultmathoptions-options" tabindex="-1"><code>setDefaultMathOptions(options)</code> <a class="header-anchor" href="#setdefaultmathoptions-options" aria-label="Permalink to &quot;`setDefaultMathOptions(options)`&quot;">​</a></h3><p>设置全局 KaTeX 配置示例：</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDefaultMathOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  commands: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;infty&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;perp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  escapeExclamation: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="工具函数" tabindex="-1">工具函数 <a class="header-anchor" href="#工具函数" aria-label="Permalink to &quot;工具函数&quot;">​</a></h3><ul><li><code>isMathLike(content)</code> — 判断文本是否可能为公式</li><li><code>findMatchingClose(src, startIdx, open, close)</code> — 查找匹配的闭合符号</li><li><code>parseFenceToken(token)</code> — 将 code fence 转为 <code>CodeBlockNode</code></li><li><code>normalizeStandaloneBackslashT(content, options?)</code> — 规范化数学内容中的特殊转义</li></ul><h2 id="解析钩子-高级" tabindex="-1">解析钩子（高级） <a class="header-anchor" href="#解析钩子-高级" aria-label="Permalink to &quot;解析钩子（高级）&quot;">​</a></h2><p>传入 <code>ParseOptions</code> 可使用以下钩子：</p><ul><li><code>preTransformTokens</code>、<code>postTransformTokens</code>、<code>postTransformNodes</code>。</li></ul><p>这些钩子也可通过 <code>MarkdownRender</code> 组件传入 <code>parseOptions</code> prop（仅当使用 <code>content</code> prop 时生效）。</p><h2 id="类型提示" tabindex="-1">类型提示 <a class="header-anchor" href="#类型提示" aria-label="Permalink to &quot;类型提示&quot;">​</a></h2><p>导出的类型包含 <code>CodeBlockNode</code>、<code>ParsedNode</code> 等，可在 TS 中导入：</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { CodeBlockNode, ParsedNode } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stream-markdown-parser&#39;</span></span></code></pre></div><h2 id="插件与默认配置" tabindex="-1">插件与默认配置 <a class="header-anchor" href="#插件与默认配置" aria-label="Permalink to &quot;插件与默认配置&quot;">​</a></h2><p>默认启用一些常见插件（emoji、footnote、task checkbox 等），并支持通过 <code>getMarkdown</code> 的 <code>plugin</code> 选项自定义插件。</p><p>更多示例与完整 API 请参考仓库内的 <code>packages/markdown-parser/README.md</code>。</p>',30)])])}const u=a(t,[["render",n]]);export{k as __pageData,u as default};
