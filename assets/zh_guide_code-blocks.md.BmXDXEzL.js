import{_ as s,c as i,o as e,ag as o}from"./chunks/framework.CA53vVaN.js";const k=JSON.parse('{"title":"代码块渲染","description":"","frontmatter":{},"headers":[],"relativePath":"zh/guide/code-blocks.md","filePath":"zh/guide/code-blocks.md"}'),n={name:"zh/guide/code-blocks.md"};function t(l,a,d,r,c,h){return e(),i("div",null,[...a[0]||(a[0]=[o(`<h1 id="代码块渲染" tabindex="-1">代码块渲染 <a class="header-anchor" href="#代码块渲染" aria-label="Permalink to &quot;代码块渲染&quot;">​</a></h1><h2 id="概述" tabindex="-1">概述 <a class="header-anchor" href="#概述" aria-label="Permalink to &quot;概述&quot;">​</a></h2><p>代码块渲染有三种策略，取决于你安装的可选依赖与配置：</p><ul><li>Monaco（推荐，用于大型/交互式代码块）：安装并使用 <code>stream-monaco</code>，提供类似编辑器的流式增量渲染体验。库在运行时按需懒加载 <code>stream-monaco</code>。</li><li>Markdown 模式（基于流式 Markdown 渲染）：安装 <code>stream-markdown</code>，并通过 <code>setCustomComponents</code> 覆盖 <code>code_block</code> 节点来提供基于 Markdown 的代码块渲染器。</li><li>回退（无额外依赖）：如果两个可选包均未安装，代码块会退回为普通的 <code>&lt;pre&gt;&lt;code&gt;</code> 渲染（仅基础样式 / 无 Monaco 功能）。</li></ul><h2 id="monaco-推荐" tabindex="-1">Monaco（推荐） <a class="header-anchor" href="#monaco-推荐" aria-label="Permalink to &quot;Monaco（推荐）&quot;">​</a></h2><ul><li>安装：</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stream-monaco</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stream-monaco</span></span></code></pre></div><ul><li><p>行为：当 <code>stream-monaco</code> 可用时，内置的 <code>CodeBlockNode</code> 会使用基于 Monaco 的流式更新，适合大型或频繁更新的代码块。</p></li><li><p>Vite Worker 注意事项：Monaco 与部分基于 Worker 的功能需要在打包时正确配置 Worker（例如 Vite 的 worker 配置），以确保运行时能加载对应的 worker。有关配置示例与 SSR 安全初始化，请参阅 <code>docs/nuxt-ssr.md</code>。</p></li><li><p>另请参阅：<code>docs/zh/guide/monaco.md</code>，其中包含 Vite <code>?worker</code> 示例和手动注册 worker 的代码片段。</p></li></ul><h2 id="markdown-模式-使用-stream-markdown" tabindex="-1">Markdown 模式（使用 stream-markdown） <a class="header-anchor" href="#markdown-模式-使用-stream-markdown" aria-label="Permalink to &quot;Markdown 模式（使用 stream-markdown）&quot;">​</a></h2><ul><li>安装：</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stream-markdown</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stream-markdown</span></span></code></pre></div><ul><li>通过 <code>setCustomComponents</code> 覆盖 <code>code_block</code> 节点以注册 Markdown 风格的代码块渲染器。示例：</li></ul><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { setCustomComponents } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue-renderer-markdown&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MyMarkdownCodeBlock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./MyMarkdownCodeBlock.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setCustomComponents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ code_block: MyMarkdownCodeBlock })</span></span></code></pre></div><p>设置后，基于 Markdown 的渲染器（来自 <code>stream-markdown</code> 或你自定义的组件）将用于 <code>code_block</code> 节点。</p><h2 id="回退" tabindex="-1">回退 <a class="header-anchor" href="#回退" aria-label="Permalink to &quot;回退&quot;">​</a></h2><p>若未安装上述任一可选包，渲染器会回退为简单的 <code>pre</code>/<code>code</code> 表现。</p><h2 id="参考链接" tabindex="-1">参考链接 <a class="header-anchor" href="#参考链接" aria-label="Permalink to &quot;参考链接&quot;">​</a></h2><ul><li>Worker / SSR 指南：<code>docs/nuxt-ssr.md</code></li><li>安装说明：<code>docs/guide/installation.md</code></li></ul>`,18)])])}const m=s(n,[["render",t]]);export{k as __pageData,m as default};
