import{_ as i,c as a,o as n,ag as t}from"./chunks/framework.CA53vVaN.js";const E=JSON.parse('{"title":"Nuxt 3 SSR 用法示例","description":"","frontmatter":{},"headers":[],"relativePath":"nuxt-ssr.zh-CN.md","filePath":"nuxt-ssr.zh-CN.md"}'),l={name:"nuxt-ssr.zh-CN.md"};function e(h,s,p,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="nuxt-3-ssr-用法示例" tabindex="-1">Nuxt 3 SSR 用法示例 <a class="header-anchor" href="#nuxt-3-ssr-用法示例" aria-label="Permalink to &quot;Nuxt 3 SSR 用法示例&quot;">​</a></h1><blockquote><p>For the English version, see <a href="./nuxt-ssr.html">nuxt-ssr.md</a>.</p></blockquote><p>本示例演示如何在 Nuxt 3 中安全地集成 <code>vue-renderer-markdown</code>，确保仅在浏览器端初始化 Monaco、Mermaid、Web Worker 等客户端功能。</p><h2 id="安装浏览器端依赖" tabindex="-1">安装浏览器端依赖 <a class="header-anchor" href="#安装浏览器端依赖" aria-label="Permalink to &quot;安装浏览器端依赖&quot;">​</a></h2><p>根据需要安装可选依赖。例如要启用 Mermaid 和 Monaco 代码编辑器：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># pnpm（推荐）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mermaid</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stream-monaco</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># npm</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mermaid</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stream-monaco</span></span></code></pre></div><p><strong>请勿</strong>在 SSR 的服务端上下文中直接导入这些依赖。</p><h2 id="示例页面-仅客户端渲染" tabindex="-1">示例页面（仅客户端渲染） <a class="header-anchor" href="#示例页面-仅客户端渲染" aria-label="Permalink to &quot;示例页面（仅客户端渲染）&quot;">​</a></h2><p>创建一个页面或组件，通过 Nuxt 内置的 <code>&lt;client-only&gt;</code> 包裹，从而确保渲染器只在客户端挂载：</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ref } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MarkdownRender </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue-renderer-markdown&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> markdown</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`# 来自 Nuxt 3 的问候</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">这段内容仅在客户端渲染。\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">client-only</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">MarkdownRender</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">markdown</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">client-only</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>这样可以保证 <code>MarkdownRender</code> 组件及其懒加载的可选依赖只会在浏览器端被导入与初始化。</p><h2 id="服务端渲染图表或公式" tabindex="-1">服务端渲染图表或公式 <a class="header-anchor" href="#服务端渲染图表或公式" aria-label="Permalink to &quot;服务端渲染图表或公式&quot;">​</a></h2><p>如果希望图表或数学公式在服务端即生成 HTML（提高首屏或 SEO），可以在构建阶段或服务端任务中预渲染：</p><ul><li>使用 <code>mermaid-cli</code> / <code>katex</code> 等工具在构建时将特定内容转换为 HTML/SVG 并嵌入页面。</li><li>提供一个服务端接口返回预渲染的图表 HTML/SVG，客户端按需拉取。</li></ul><p>随后将这些预渲染内容作为可信 HTML 或服务端生成的 AST 传入渲染器，即可避免在客户端重复初始化重型依赖。</p><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h2><ul><li>使用 Monaco 编辑器、Web Worker 或渐进式 Mermaid 时，推荐始终配合 <code>&lt;client-only&gt;</code>。</li><li>库经过 SSR 导入安全性设计：重型依赖采用浏览器端懒加载，并对 DOM/Worker 调用做了守卫。如果仍遇到导入阶段的 <code>ReferenceError</code>，请附上堆栈信息提交 issue。</li></ul><hr><p>如需完整的 Nuxt 3 集成示例（带可运行的 <code>playground/</code> 项目），欢迎提出需求或提 issue。</p>`,19)])])}const c=i(l,[["render",e]]);export{E as __pageData,c as default};
